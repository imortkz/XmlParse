# test XML parse class
# Copyright © 2015 Valentin Kim
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

		Тестовое задание

Разбор XML-документа
Для каждой ноды "//input", у которой присутствует дочерняя нода "tuningSetup", извлечь значения аттрибутов "@id" текущей и дочерней нод.
Исходный текст: http://pastebin.com/raw.php?i=Wpjx1BGY
Язык реализации любой (Но, пожалуйста, не brainfuck, не ассемблер).
Дополнительно: будет плюсом, если в скрипте/программе будет реализовано получение документа по http непосредственно с ресурса.
Дополнительно: так же будет зачтено, если в скрипте/программе будут учтены исключительные ситуации или, по крайней мере, если возможные исключения будут указаны в комментариях.
В данном тесте правильным считается ответ в виде файла исходного кода или скрипта, корректно извлекающий значения ID из приведенного в качестве примера  документа.

Список файлов:
		TestXmlParse	— каталог с xml документами для юнит-тестов
		XmlParse.py 	— класс xmlParse
		example.py 		— пример использования класса xmlParse()
		LICENSE			— лицензия GPL v.2
		README			— этот файл

На основании тестового задания была разработана следующая спецификация:

		Спецификация

	1. Семантика. 

Разбираем XML документ, предоставленный в виде ссылки на локальный файл или ссылки HTTP.
Необходимо найти все ноды <input>, у которых есть дочерние ноды <tuningSetup>, извлечь значение атрибута id ноды <tuningSetup> и родительской по отношению к ней ноды <input> 

Требования к XML документу сформированы на основании предоставленного исходного текста: http://pastebin.com/raw.php?i=Wpjx1BGY

- Документ, не являющийся валидным XML документом, считается некорректным.
- Элемент <input> без атрибута id, или с атрибутом id не являющимся целочисленным положительным значением (или равным нулю), считается некорректным.
- Элемент <tuningSetup> без атрибута id, или с атрибутом id не являющимся целочисленным положительным значением (или равным нулю), считается некорректным.
- Документ, с дублирующимися атрибутами id у разных элементов <input> считается некорректным.

	2. Входные параметры

Это будет класс XmlParse с одним публичным методом parse()
У метода parse() единственный параметр input, который должен содержать относительный/абсолютный путь к файлу) XML документа для разбора или URL содержащий прямую ссылку на XML документ.
URL должен начинаться с http:// или https://, в противном случае строка будет интерпретирована как локальный путь к файлу.
По умолчанию, размер XML документа не должен превышать 16 Кбайт, или будет выдано исключение 201.
Поведение по умолчанию можно переопределить с помощью задания свойства XmlParse.max_size

	3. Выходные параметры.
	
Метод parse() вернёт словарь (dictionary), ключом в котором являются атрибуты id элементов <input>, а значениями элементы типа список (list) содержащие один или несколько значений 
атрибутов id элементов <tuningSetup>. Например, для исходного текста http://pastebin.com/raw.php?i=Wpjx1BGY метод вернёт:

	{'100': ['0'], '1': ['1', '2', '3'], '2': ['1']}

В случае ошибки будет возвращено исключение класса xmlParseException, с выводом кода ошибки и его описанием. Текст описания не специфицируется.
Коды ошибок: 

1xx - неверный набор входных параметров
...100 - в качестве параметра передана не строка или параметр пустой
...101 - не удаётся открыть HTTP ссылку
...102 - не удаётся открыть файл
...103 - параметру maxSize передано недопустимое значение
2xx - неверный формат документа (ошибка разбора XML)
...200 - документ не является документом XML
...201 - размер документа превышает допустимый
...202 - у элемента <input> отсутствует атрибут id
...203 - у элемента <input> атрибут id имеет недопустимое значение (не целочисленное положительное или равное нулю)
...204 - у элемента <tuningSetup> отсутствует атрибут id
...205 - у элемента <tuningSetup> атрибут id имеет недопустимое значение (не целочисленное положительное или равное нулю)
...206 - есть элементы <input> с дублирующимися атрибутами id.

Если ситуация потенциально может вызвать несколько ошибок, например наличие двух элементов <input> с одинаковыми id, и отсутствие этого атрибута в одном из элементов
<tuningSetup>, то сообщается только о первой встреченной нами ошибке. При этом порядок проверки потенциально ошибочных ситуаций не определен. 

	4. Нефункциональные требования. 

Код разработан для версии языка Python 3.4.х, и протестирован для исполнения в среде Windows (Windows 7 x64)
К скорости вычисления выражения, и к объему памяти, занимаемой в процессе вычисления, требований нет.

		Тесты	

Для тестирования разработан класс XmlParseTest() с использованием библиотеки unittest

1. Тестирование разбора корректного XML документа
1.1. Предоставленный исходный текст
1.2. Документ с несколькими нодами <input> без вложенных нод <tuningSetup>
1.3. Документ с несколькими нодами <input>, одна из которых вложена в другую, и содержит в себе ноду <tuningSetup>
1.4. Документ с нодой <tuningSetup> вложенной в другую ноду <tuningSetup> 
1.5. Документ с нодой <input> и вложенной нодой <tuningSetup>, вложенные произвольно глубоко.
2. Тестирование входных параметров
2.1. Параметр неверного типа
2.1.1. Число
2.1.2. Список
2.1.3. Null
2.2. Несуществующий файл, некорректный URL
2.3. Несуществующий URL
2.4. Слишком большой XML документ
2.5. Слишком большой документ (при увеличении xmlParse.maxSize)
2.6. Некорректное значение xmlParse.maxSize
3. Тестирование разбора некорректного XML документа
3.1. Невалидный XML документ
3.2. Есть нода <input> без атрибута id
3.3. Есть нода <input> с недопустимым значением атрибута id
3.4. Есть нода <tuningSetup> без атрибута id
3.5. Есть нода <tuningSetup> с недопустимым значением атрибута id
3.6. Есть нода <input> с дублирующимся атрибутом id

По умолчанию при исполнении модуля XmlParse выполнятся все юнит-тесты.